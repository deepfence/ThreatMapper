import { EChartsOption } from 'echarts';

import { ReactECharts } from '@/components/ReactEcharts';
import { Mode } from '@/theme/ThemeContext';

const option: EChartsOption = {
  backgroundColor: 'transparent',
  tooltip: {
    trigger: 'item',
  },
  legend: {
    data: ['Critical', 'High', 'Medium', 'Low'],
    bottom: 0,
    left: 'center',
  },
  dataset: {
    source: [
      {
        Vulnerability: 'Critical',
        value: 1048,
      },
      {
        Vulnerability: 'High',
        value: 300,
      },
      {
        Vulnerability: 'Medium',
        value: 30,
      },
      {
        Vulnerability: 'Low',
        value: 2000,
      },
    ],
  },
  series: [
    {
      name: 'Funnel',
      type: 'funnel',
      min: 0,
      max: 100,
      minSize: '0%',
      maxSize: '100%',
      gap: 2,
      label: {
        show: false,
      },
      labelLine: {
        length: 10,
        lineStyle: {
          width: 1,
        },
      },
      itemStyle: {
        borderColor: 'transparent',
      },
      emphasis: {
        label: {
          fontSize: 20,
        },
      },
    },
  ],
};

export const UniqueVulnerabilityChart = ({ theme }: { theme: Mode }) => {
  return <ReactECharts theme={theme === 'dark' ? 'dark' : 'light'} option={option} />;
};
